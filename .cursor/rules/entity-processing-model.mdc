---
description: Documents the named entity recognition and pronunciation rules system used across the project
globs: **/malmo_entitizer.py,**/src/e11ocutionist/entitizer.py,**/src/e11ocutionist/neifix.py
alwaysApply: false
---


# entity-processing-model

The entity processing model implements specialized named entity recognition and pronunciation handling for text-to-speech optimization.

Core Components:

1. Named Entity Recognition Rules (Importance: 95)
- Identifies domain-specific named entities requiring special pronunciation:
  * People, locations, organizations
  * Technical/scientific terms
  * Foreign words and phrases
  * Complex abbreviations/acronyms
- Tracks entity occurrence frequency and maintains pronunciation history
- Implements contextual language detection for pronunciation adaptation

2. Pronunciation Dictionary Management (Importance: 90) 
- Maintains global pronunciation dictionary across document chunks
- Implements language-specific pronunciation transformation rules:
  * Cross-language adaptations (e.g. "José" → "Hose")
  * Technical term expansions
  * Acronym handling (spell-out vs. word form)
- Preserves consistent entity pronunciation through document

3. NEI Tag Processing (Importance: 85)
- XML tagging format: <nei orig="ORIGINAL">PRONUNCIATION</nei>
- Tracks first occurrences with new="true" attribute
- Maintains original formatting and whitespace
- Implements specialized processing for:
  * Single-letter preservation (acronyms)
  * Hyphenation removal
  * Case normalization rules
  * Inter-word spacing standardization

4. Language-Aware Processing (Importance: 80)
- Detects document's primary language
- Adjusts pronunciation rules based on language context
- Handles multi-language content with appropriate pronunciation adaptations
- Maintains pronunciation consistency across language boundaries

File Paths:
/src/e11ocutionist/entitizer.py
/legacy_src/malmo_entitizer.py
/src/e11ocutionist/neifix.py

$END$