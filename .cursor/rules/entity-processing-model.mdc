---
description: Specifications for the named entity recognition system, pronunciation rules, and entity dictionary management
globs: **/malmo_entitizer.py,**/entitizer.py,**/neifix.py
alwaysApply: false
---


# entity-processing-model

The entity processing system implements specialized rules for identifying, tagging and managing named entities requiring custom pronunciation handling in text-to-speech synthesis.

Core Components:

1. Named Entity Recognition System (Importance: 95)
- Identifies domain-specific named entities requiring pronunciation guidance
- Maintains entity dictionary with language-specific pronunciations
- Progressive learning updates dictionary as new entities are discovered
- Preserves case-sensitive variants while enabling case-insensitive matching

2. Entity Classification Rules (Importance: 85)
- Proper names (people, places, organizations)
- Technical terms and jargon
- Foreign words and phrases 
- Abbreviations/acronyms
- Complex numerical expressions
- Unusual spellings

3. Pronunciation Mapping Policies (Importance: 90)
- Language-specific orthography transcription
- Handles palatalization rules (e.g. "sea" â†’ "sji" in Polish)
- Syllable division with hyphens for complex pronunciations
- Special handling for non-standard characters and accents

4. XML Entity Tagging Schema (Importance: 80)
```xml
<nei orig="ORIGINAL" new="true">PRONUNCIATION</nei>
```
- Tracks first occurrence with new="true" attribute
- Maintains original spelling in orig attribute
- Contains language-specific pronunciation guidance
- Enforces no nested tags rule

5. Processing Pipeline (Importance: 75)
File: malmo_entitizer.py, entitizer.py
- Chunk-based incremental processing
- Maintains entity consistency across document
- Updates global entity dictionary progressively
- Preserves document formatting and whitespace
- Multi-stage fallback strategy for failed entity recognition

$END$