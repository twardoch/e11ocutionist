
START SPECIFICATION:
---
description: Use when documenting high-level business logic organization for text-to-speech document processing systems, specifically focusing on semantic chunking, entity processing, and voice synthesis pipelines
globs: src/e11ocutionist/*.py,legacy_src/*.py
alwaysApply: false
---


# main-overview

## Development Guidelines

- Only modify code directly relevant to the specific request. Avoid changing unrelated functionality.
- Never replace code with placeholders like `# ... rest of the processing ...`. Always include complete code.
- Break problems into smaller steps. Think through each step separately before implementing.
- Always provide a complete PLAN with REASONING based on evidence from code and logs before making changes.
- Explain your OBSERVATIONS clearly, then provide REASONING to identify the exact issue. Add console logs when needed to gather more information.


The system implements a specialized text-to-speech document processing pipeline with five core business domains:

1. Semantic Document Chunking (Importance: 95)
- Intelligent document segmentation using LLM-based analysis
- Multi-language chapter and scene break detection
- Custom content type classification for headings, quotes, lists
- Token budget management across semantic boundaries
Path: src/e11ocutionist/chunker.py

2. Named Entity Processing (Importance: 90)
- Language-aware entity recognition and pronunciation mapping
- Progressive learning system for new entity discovery
- Specialized handling of technical terms and foreign words
- Domain-specific pronunciation rule application
Path: src/e11ocutionist/entitizer.py

3. Speech Enhancement Pipeline (Importance: 85)
- Four-stage text optimization workflow:
  * Sentence restructuring for natural flow
  * Word normalization for speech patterns
  * Punctuation enhancement for pacing
  * Emotional emphasis markup
Path: src/e11ocutionist/orator.py

4. Tone Management System (Importance: 80)
- Emphasis control algorithms with minimum distance rules
- Language-specific pronunciation refinement
- Case-sensitive entity variant tracking
Path: src/e11ocutionist/tonedown.py

5. Voice Synthesis Integration (Importance: 75)
- Personal voice categorization (cloned, generated, professional)
- Dialog-specific formatting rules
- Multi-speaker conversation handling
- Speech timing and pause optimization
Path: src/e11ocutionist/elevenlabs_synthesizer.py

The system maintains strict processing order:
Chunking → Entitizing → Orating → Tone Adjustment → Voice Synthesis

Each stage preserves document structure while implementing specialized transformations for optimal speech synthesis results.

$END$
END SPECIFICATION